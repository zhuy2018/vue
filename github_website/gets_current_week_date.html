<!DOCTYPE HTML>
<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<title>首页 - 获取当前周、上一周、下一周日期</title>
<link href="css/basic.css" rel="stylesheet" type="text/css">
<style type="text/css">
.index h2{font-size:32px;margin:0 0 20px;}
.div2{width:720px;height:auto;margin:0 auto;position:relative;}
.highlight{overflow:auto;width:98%;height:auto;padding:.3em .5em;border:1px solid silver;background:radial-gradient(at top,rgba(0,0,0,.2),transparent 70%) no-repeat;background-size:100% 15px;margin:0 0 50px;}
.box{width: 450px;padding:40px; height: auto;margin:0 auto;}
.box span{width:100%; height: 20px; display: block;}
#monitor{margin:10px 0 0; font-size:14px;}
</style>
<script type="text/javascript" src="js/jquery-1.10.1.min.js"></script>
<script type="text/javascript" src="js/index_zong.js"></script>
<script type="text/javascript">
window.onload = function(){         
    var cells = document.getElementById('monitor').getElementsByTagName('span');
    var clen = cells.length;
    var arr=[];
    var currentFirstDate;
    var formatDate = function(date){             
        var year = date.getFullYear()+'年';
        var month = (date.getMonth()+1)+'月';
        var day = date.getDate()+'日';
        var week = '('+['星期天','星期一','星期二','星期三','星期四','星期五','星期六'][date.getDay()]+')';  

        return year+month+day+' '+week;
    };
    var addDate= function(date,n){       
        date.setDate(date.getDate()+n);        
        return date;
    };
    var setDate = function(date){             
        var week = date.getDay()-1;
        date = addDate(date,week*-1);
        currentFirstDate = new Date(date);
        for(var i = 0;i<clen;i++){                 
            cells[i].innerHTML = formatDate(i==0 ? date : addDate(date,1));
            var str=cells[i].innerHTML;
            str=str.split('日')[0];
            str=str.substring(5, str.length).replace(/月/, "-");
            arr.push( str );
        };
        console.log(arr);            
    };             
    document.getElementById('last-week').onclick = function(){
        setDate(addDate(currentFirstDate,-7));         
    };             
    document.getElementById('next-week').onclick = function(){                 
        setDate(addDate(currentFirstDate,7));
    };     
    setDate(new Date());
}
</script>
</head>

<body>
<div class="index">
  <h2>获取当前周、上一周、下一周日期</h2>
</div>

<div class="div2">
  <div class="highlight">
    <div class="box">
      <button id="last-week">上一周</button>
      <button id="next-week">下一周</button>
      <div id="monitor">
        <span></span>
        <span></span>
        <span></span>
        <span></span>
        <span></span>
        <span></span>
        <span></span>
      </div>
    </div>
  </div>
</div>
</body>
</html>