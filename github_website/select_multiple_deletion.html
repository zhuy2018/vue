<!DOCTYPE HTML>
<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<title>首页 - select选择，重复选择删除</title>
<link href="css/basic.css" rel="stylesheet" type="text/css">
<style type="text/css">
.index h2{font-size:32px;margin:0 0 20px;}
.div2{width:720px;height:auto;margin:0 auto;position:relative;}
.highlight{overflow:auto;width:98%;height:auto;padding:.3em .5em;border:1px solid silver;background:radial-gradient(at top,rgba(0,0,0,.2),transparent 70%) no-repeat;background-size:100% 15px;margin:0 0 50px;}
.box{width: 100%;height: auto;margin:0 auto;}
.box span{width:50%;height: 20px;  display: block; }
#monitor{margin:10px 0 0; font-size:14px;}
</style>
<script type="text/javascript" src="js/jquery-1.10.1.min.js"></script>
<script type="text/javascript" src="js/index_zong.js"></script>
<script type="text/javascript">
$(function () {
    var arr = [];
    var btn = false;
    var num=0;
    $("#appkey").on('click', function () {
        num++;
        //console.log(btn)
        //console.log($(this).find("option:selected").val());
        if(num%2==0){
            for (var i = 0; i < arr.length; i++) {
                if (arr[i] == $(this).find("option:selected").val()) {
                    arr.splice(i, 1);
                    console.log(arr)
                    $("#appkey_text").val(arr.join(', '));
                    return;
                }
            }
            arr.push($(this).find("option:selected").val());
            $("#appkey_text").val(arr.join(', '));
            btn=!btn;
        }
    });

    var arr1 = [];
    var siez=$("#appkey1").find('option').length;
    $("#appkey1").attr('size', siez);
    $("#appkey1").on('click',function(){
        for(var i=0; i<arr1.length; i++){
            console.log( $("#appkey1").val() )
            if(arr1[i] == $(this).find("option:selected").val()){
                arr1.splice(i, 1);
                $("#appkey_text1").val( arr1.join(', ') );
                return;
            }
        }
        arr1.push( $(this).find("option:selected").val() );
        $("#appkey_text1").val( arr1.join(', ') );
    });
});
</script>
</head>

<body>
<div class="index">
  <h2>select选择，重复选择删除</h2>
</div>

<div class="div2">
  <div class="highlight">
    <div class="box">
        <input id="appkey_text" type="text" style="width:99.5%; margin-top:10px;height:20px;margin-bottom:10px;"/>
        <select id="appkey" name="appkey" class="form-control" required="true" msg="状态"
                style="width: 100%;height:30px;margin-bottom:20px;padding:0px;">
            <option value="TEST">TEST</option>
            <option value="ELM">ELM</option>
            <option value="ALI">ALI</option>
            <option value="AW">AW</option>
        </select>
        <input id="appkey_text1" type="text" style="width:99.5%;height:20px;margin-bottom:10px;" />
        <select size="" id="appkey1" name="appkey" class="form-control" required="true" msg="状态" style="width: 100%;margin-bottom:10px;padding:0px;">
            <option value="TEST">TEST</option>
            <option value="ELM">ELM</option>
            <option value="ALI">ALI</option>
            <option value="AW">AW</option>
            <option value="TEST">TEST</option>
            <option value="ELM">ELM</option>
            <option value="ALI">ALI</option>
            <option value="AW">AW</option>
        </select>
    </div>
  </div>
</div>
</body>
</html>